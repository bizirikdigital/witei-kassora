<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Presupuestos</title>
  <style>
    .presupuesto-section {
      max-width: 1000px;
      margin: auto;
      padding: 40px;
      border-radius: 10px;
      background: url('https://i.ibb.co/fV42cgYF/fotofondo.jpg') no-repeat center center;
      background-size: cover;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      color: #fff;
      font-family: Arial, sans-serif;
    }

    .presupuesto-section h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #ffffff;
    }

    .presupuesto-section .form-group {
      margin-bottom: 20px;
    }

    .presupuesto-section .form-group label {
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .presupuesto-section input[type="number"] {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: none;
    }

    .presupuesto-section .options-container,
    .presupuesto-section .quality-options {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .presupuesto-section .option,
    .presupuesto-section .quality-option {
      flex: 1;
      min-width: 200px;
      text-align: center;
      padding: 20px;
      background: #ffffffcc;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.3s;
      color: #000;
    }

    .presupuesto-section .option:hover,
    .presupuesto-section .quality-option:hover {
      transform: scale(1.05);
    }

    .presupuesto-section .option.selected,
    .presupuesto-section .quality-option.selected {
      background-color: #cbc4bc;
      color: #000;
    }

    .presupuesto-section .option img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .presupuesto-section .result-box {
      background: #ffffffcc;
      color: #000;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 20px;
      font-size: 24px;
      font-weight: bold;
    }

    .presupuesto-section .summary-container {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      color: #fff;
    }

    .presupuesto-section .summary-column {
      width: 48%;
    }

    .presupuesto-section .summary-column h3 {
      margin-bottom: 10px;
      color: #fff;
    }

    .presupuesto-section .summary-column ul {
      list-style: none;
      padding: 0;
    }

    .presupuesto-section .summary-column ul li::before {
      content: '‚úî';
      margin-right: 8px;
      color: #cbc4bc;
    }

    .presupuesto-section .hidden {
      display: none;
    }

    .presupuesto-section button {
      background-color: #cbc4bc;
      color: #000;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
      display: block;
      margin: 20px auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .presupuesto-section button:hover {
      background-color: #b8b0a8;
    }

    .presupuesto-section textarea {
      width: 100%;
      height: 80px;
      border-radius: 8px;
      padding: 10px;
      font-family: inherit;
      font-size: 14px;
      resize: vertical;
    }

    .popup {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    .popup-content {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .popup-content input {
      width: 100%;
      padding: 10px;
      margin-top: 15px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .popup-content button {
      background-color: #cbc4bc;
      color: #000;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>

<section class="presupuesto-section">
  <h2>Calcula tu presupuesto</h2>

  <div id="popupCorreo" class="popup hidden">
    <div class="popup-content">
      <p>Introduce tu correo electr√≥nico para continuar:</p>
      <input type="email" id="correoUsuario" placeholder="tuemail@ejemplo.com">
      <button onclick="confirmarCorreo()">Enviar</button>
    </div>
  </div>

  <div class="form-group">
    <label for="metros">¬øCu√°ntos metros cuadrados tiene tu obra?</label>
    <input type="number" id="metros" placeholder="Ej: 80">
  </div>

  <div class="form-group">
    <label>¬øQu√© tipo de reforma deseas?</label>
    <div class="options-container">
      <div class="option" onclick="selectReforma('integral', event)">
        <img src="https://i.ibb.co/9mMnr5j9/reformaintegral.jpg" alt="Reforma Integral">
        Reforma Integral
      </div>
      <div class="option" onclick="selectReforma('ba√±o', event)">
        <img src="https://i.ibb.co/7xyJRqS7/reformaba-o.jpg" alt="Reforma Ba√±o">
        Reforma de Ba√±o
      </div>
      <div class="option" onclick="selectReforma('cocina', event)">
        <img src="https://i.ibb.co/mr2mLwpM/reformacocina.jpg" alt="Reforma Cocina">
        Reforma de Cocina
      </div>
      <div class="option" onclick="selectReforma('otros', event)">
        <img src="https://i.ibb.co/cXvzvd0m/otros.jpg" alt="Otros">
        Otros
      </div>
    </div>
  </div>

  <div id="calidadContainer" class="quality-options hidden">
    <div class="quality-option" onclick="selectCalidad('baja', event)">Calidad Baja</div>
    <div class="quality-option" onclick="selectCalidad('media', event)">Calidad Media</div>
    <div class="quality-option" onclick="selectCalidad('alta', event)">Calidad Alta</div>
  </div>

  <div id="otrosTexto" class="form-group hidden">
    <textarea id="descripcionOtros" placeholder="Describe tu reforma"></textarea>
    <button onclick="mandarSolicitudOtros()">Mandar Solicitud</button>
  </div>

  <button id="btnCalcularPresupuesto" onclick="calcularPresupuesto()">Calcular Presupuesto Reforma</button>

  <div id="resultado" class="result-box hidden"></div>

  <button id="btnCalcularProyecto" onclick="calcularProyecto()" class="hidden">Calcular Proyecto</button>

  <div id="resultadoProyecto" class="result-box hidden"></div>

  <div id="resumen" class="hidden">
    <div class="summary-container">
      <div class="summary-column">
        <h3>üìë Documentaci√≥n entregada</h3>
        <ul>
          <li>Presupuesto detallado</li>
          <li>Memoria descriptiva de la reforma</li>
          <li>Plano o renders con visor 3D</li>
          <li>Diagrama de la obra</li>
          <li>Modelo de contrato</li>
          <li>Licencias o tramitaci√≥n (si aplica)</li>
          <li>Datos de contacto y asesor asignado</li>
          <li>Dossier Visual presentaci√≥n (opcional)</li>
        </ul>
      </div>
      <div class="summary-column">
        <h3>üõ°Ô∏è Garant√≠as ofrecidas</h3>
        <ul>
          <li>Contrato de obra</li>
          <li>Penalizaciones por retraso</li>
          <li>Garant√≠as post-obra</li>
          <li>Informes semanales de avances</li>
          <li>Documentaci√≥n fotogr√°fica</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<script>
  let tipo = '';
  let calidad = '';
  let metros = 0;
  let datosUsuario = {};

  function selectReforma(value, event) {
    tipo = value;
    document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
    event.currentTarget.classList.add('selected');

    document.getElementById('calidadContainer').classList.toggle('hidden', tipo !== 'integral');
    document.getElementById('otrosTexto').classList.toggle('hidden', tipo !== 'otros');
    document.getElementById('btnCalcularPresupuesto').classList.toggle('hidden', tipo === 'otros');
  }

  function selectCalidad(value, event) {
    calidad = value;
    document.querySelectorAll('.quality-option').forEach(opt => opt.classList.remove('selected'));
    event.currentTarget.classList.add('selected');
  }

  function calcularPresupuesto() {
    metros = parseFloat(document.getElementById("metros").value);
    if (isNaN(metros) || metros <= 0 || !tipo || (tipo === 'integral' && !calidad)) {
      alert("Por favor rellena todos los campos correctamente.");
      return;
    }

    datosUsuario = { metros, tipo, calidad };
    mostrarPopupCorreo();
  }

  function mostrarPopupCorreo() {
    document.getElementById("popupCorreo").classList.remove("hidden");
  }

  function confirmarCorreo() {
    const correo = document.getElementById("correoUsuario").value.trim();
    if (!/\S+@\S+\.\S+/.test(correo)) {
      alert("Por favor introduce un correo v√°lido.");
      return;
    }

    datosUsuario.correo = correo;
    document.getElementById("popupCorreo").classList.add("hidden");

    if (tipo === 'otros') {
      document.getElementById('resumen').classList.remove('hidden');
    } else {
      mostrarPresupuesto();
    }
  }

  function mostrarPresupuesto() {
    let precio = 0;
    if (tipo === 'integral') {
      if (calidad === 'baja') precio = 1000;
      if (calidad === 'media') precio = 1200;
      if (calidad === 'alta') precio = 1600;
    } else {
      precio = 2500;
    }

    const total = metros * precio;
    const resultadoDiv = document.getElementById("resultado");
    resultadoDiv.innerHTML = `Presupuesto estimado: <strong>${total.toLocaleString()} ‚Ç¨</strong>`;
    resultadoDiv.classList.remove('hidden');

    if (tipo === 'integral') {
      document.getElementById('btnCalcularProyecto').classList.remove('hidden');
    }

    document.getElementById('resumen').classList.remove('hidden');
    console.log("Datos del usuario:", datosUsuario);
  }

  function calcularProyecto() {
    const resultadoDiv = document.getElementById("resultadoProyecto");
    resultadoDiv.innerHTML = `Coste adicional del proyecto: <strong>2.000 ‚Ç¨</strong>`;
    resultadoDiv.classList.remove('hidden');
  }

  function mandarSolicitudOtros() {
    const descripcion = document.getElementById("descripcionOtros").value.trim();
    if (!descripcion) {
      alert("Por favor describe tu reforma antes de mandar la solicitud.");
      return;
    }
    datosUsuario = { tipo, descripcion };
    mostrarPopupCorreo();
  }
</script>
</body>
</html>
